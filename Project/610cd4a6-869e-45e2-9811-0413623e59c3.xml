{"CLs":[{"__type":"IST","EID":"076f7149-3886-42d8-b4c8-8474bb8c468c","H":499.60000000000014,"TXT":"\/\/Create telegram to transfer\u000d\u000a\u000d\u000a\/\/ Select type of Command\u000d\u000aIF ReadData THEN eCommand:=\\\\OEN\\RFID\\eRFID#READ_DATA;\u000d\u000aELSIF WriteData THEN eCommand:=\\\\OEN\\RFID\\eRFID#WRITE_DATA;\u000d\u000aELSE\u0009eCommand:=Command;\u000d\u000aEND_IF;\u000d\u000a\u000d\u000a\/\/Decode Command into value and Clear DataArray\u000d\u000amyRFID.CMD.Code:=DINT_TO_WORD(EnumToNum(eCommand));\u000d\u000aClear(myRFID.CMD.Data);\u000d\u000a\u000d\u000a\/\/Select action depending on Command Type\u000d\u000aCASE eCommand OF\u000d\u000a\u0009\u000d\u000a\u0009READ_ID :\u000d\u000a\u0009\u0009myRFID.CMD.Param1:=0;\u000d\u000a\u0009\u0009myRFID.CMD.Param2:=0;\u0009\u000d\u000a\u0009\u0009\u000d\u000a\u0009READ_DATA :\u000d\u000a\u0009\u0009myRFID.CMD.Param1:=Data.MemoryOffset;\u000d\u000a\u0009\u0009myRFID.CMD.Param2:=UINT_TO_WORD(Data.DataWords);\u000d\u000a\u0009\u0009\u000d\u000a\u0009WRITE_DATA :\u000d\u000a\u0009\u0009myRFID.CMD.Param1:=Data.MemoryOffset;\u000d\u000a\u0009\u0009myRFID.CMD.Param2:=UINT_TO_WORD(Data.DataWords);\u000d\u000a\u0009\u0009AryByteTo(Data.TagData[0],Data.DataWords*2,_LOW_HIGH, myRFID.CMD.Data);\u000d\u000a\u0009\u0009\u000d\u000a\u0009MASURE_NOISE :\u000d\u000a\u0009\u0009myRFID.CMD.Param1:=0;\u000d\u000a\u0009\u0009myRFID.CMD.Param2:=0;\u0009\u000d\u000a\u0009\u0009\u000d\u000a\u0009RESET :\u000d\u000a\u0009\u0009myRFID.CMD.Param1:=0;\u000d\u000a\u0009\u0009myRFID.CMD.Param2:=0;\u0009\u000d\u000a\u0009\u0009\u000d\u000a\u0009SET_RF_COMMS :\u000d\u000a\u0009\u0009myRFID.CMD.Param1:=0;\u000d\u000a\u0009\u0009myRFID.CMD.Param2:=0;\u0009\u000d\u000a\u0009\u0009myRFID.CMD.Data[0]:=Data.CommOption; \u000d\u000a\u0009\u0009myRFID.CMD.Data[1]:=Data.CommSpeed; \u000d\u000a\u0009\u0009myRFID.CMD.Data[2]:=Data.WriteVerify; \u000d\u000a\u0009\u0009myRFID.CMD.Data[3]:=Data.CommDiagnostics; \u000d\u000a\u0009\u0009\u000d\u000a\u0009GET_RF_COMMS :\u000d\u000a\u0009\u0009myRFID.CMD.Param1:=0;\u000d\u000a\u0009\u0009myRFID.CMD.Param2:=0;\u0009\u000d\u000a\u0009\u0009\u000d\u000aEND_CASE;","W":704.79999999999973}],"CMT":"COMMAND DATA","LRI":1,"RRI":2,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"ReadData"},{"__type":"LD","Ix":1,"Var":"WriteData","Y":1},{"__type":"LD","Ix":2,"Var":"ExeCommand","Y":2},{"__type":"ST","Ix":3,"Var":"myRFID.CMD.Bits.EXE","X":1}],"CMT":"Execute Command","LRI":4,"RRI":5,"VLs":[{"Ix":6,"X":1},{"Ix":6,"X":1,"Y":1}]}
{"CLs":[{"__type":"LD","Var":"Enable"},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":1,"Type":"ANY","Var":"myRFID.CMD"}],"Ix":5,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":2,"Type":"ANY","Var":"To_V680S"}],"X":1},{"__type":"F","In":[{"__type":"PF","Arg":"EN"},{"__type":"PRM","Arg":"In","Ix":3,"Type":"ANY","Var":"From_V680S"}],"Ix":6,"Name":"MOVE","Out":[{"__type":"PF","Arg":"ENO"},{"__type":"PRM","Arg":"Out","Ix":4,"Type":"ANY","Var":"myRFID.Response"}],"X":2}],"LRI":7,"RRI":8,"VLs":[]}
{"CLs":[{"__type":"LD","Id":"1f4a5ad9-2f06-4710-8871-e3a900000018","Up":true,"Var":"myRFID.Response.Bits.NORM"},{"__type":"LD","Id":"1f4a5ad9-2f06-4710-8871-e3a900000019","Ix":1,"Up":true,"Var":"myRFID.Response.Bits.FRIC","Y":1},{"__type":"LD","Dwn":true,"Id":"1f4a5ad9-2f06-4710-8871-e3a90000001a","Ix":2,"Var":"myRFID.Response.Bits.FRIC","Y":2},{"__type":"IST","EID":"4b9c7089-d696-4280-9c59-d8e4afaa13b3","H":306.00000000000045,"Ix":3,"TXT":"CASE eCommand OF\u000d\u000a\u0009\u000d\u000a\u0009READ_ID :\u000d\u000a\u0009\u0009ARYBYTETO(myRFID.Response.Data[0],8,_LOW_HIGH,ResponseData.RFTag_UID);\u000d\u000a\u0009\u0009Clear(ResponseData.TagData);\u000d\u000a\u0009READ_DATA :\u000d\u000a\u0009\u0009Clear(ResponseData.TagData);\u000d\u000a\u0009\u0009AryMove(myRFID.Response.Data[0],ResponseData.TagData[0],Data.DataWords*2);\u000d\u000a\u0009WRITE_DATA :\u000d\u000a\u0009\u0009Clear(ResponseData.TagData);\u000d\u000a\u0009MASURE_NOISE :\u000d\u000a\u0009\u0009ResponseData.AverageNoise:=myRFID.Response.Data[0];\u000d\u000a\u0009\u0009ResponseData.MaximumNoise:=myRFID.Response.Data[2];\u000d\u000a\u0009\u0009ResponseData.MinimumNoise:=myRFID.Response.Data[4];\u000d\u000a\u0009RESET :\u000d\u000a\u0009\u0009Clear(ResponseData.TagData);\u000d\u000a\u0009SET_RF_COMMS :\u000d\u000a\u0009\u0009Clear(ResponseData.TagData);\u000d\u000a\u0009GET_RF_COMMS :\u000d\u000a\u0009\u0009ResponseData.CommOption:=myRFID.Response.Data[0];\u000d\u000a\u0009\u0009ResponseData.CommSpeed:=myRFID.Response.Data[2];\u000d\u000a\u0009\u0009ResponseData.WriteVerify:=myRFID.Response.Data[4];\u000d\u000a\u0009\u0009ResponseData.CommDiagnostics:=myRFID.Response.Data[6];\u000d\u000aEND_CASE;\u000d\u000a\u000d\u000aErrorMessage:='OK';","W":620.79999999999973,"X":1}],"CMT":"RESPONSE DATA","LRI":4,"RRI":5,"VLs":[{"Ix":6,"X":1},{"Ix":6,"X":1,"Y":1}]}
{"CLs":[{"__type":"IST","EID":"a7f883c9-02e2-43e6-bf15-5457b8624bbd","H":429.99999999999989,"TXT":"\/\/Communications diagnostics result in \"Response.Info2\"\u000d\u000a\u000d\u000aCASE WORD_TO_INT(myRFID.Response.Info2) OF\u000d\u000a\u0009\u000d\u000a\u000916#0000 :\u000d\u000a\u0009\u0009Info2Message:='Normal Response';\u000d\u000a\u000916#0001 :\u000d\u000a\u0009\u0009Info2Message:='Insufficient power to send';\u000d\u000a\u000916#0002 :\u000d\u000a\u0009\u0009Info2Message:='Insufficient power to receive';\u000d\u000a\u000916#0003 :\u000d\u000a\u0009\u0009Info2Message:='Too much noise';\u000d\u000a\u000916#0004 :\u000d\u000a\u0009\u0009Info2Message:='Insufficient signal-to-noise ratio';\u0009\u000d\u000a\u000d\u000aEND_CASE;\u000d\u000a\u000d\u000aIF NOT myRFID.Response.Bits.READY THEN\u000d\u000a\u0009Info2Message:='Not READY or BUSY ';\u000d\u000aEND_IF;\u000d\u000a\u0009","W":767.19999999999993}],"LRI":1,"RRI":2,"VLs":[]}
{"CLs":[{"__type":"LD","Id":"1f4a5ad9-2f06-4710-8871-e3a900000024","Up":true,"Var":"myRFID.Response.Bits.ERR"},{"__type":"IST","EID":"bef3f2b7-cf44-4476-a188-c19c83a2bc2c","H":453.20000000000005,"Ix":1,"TXT":"Clear(ResponseData.TagData);\u000d\u000aClear(ResponseData.RFTag_UID);\u000d\u000a\u000d\u000aCASE WORD_TO_INT(myRFID.Response.ErrCode) OF\u000d\u000a\u0009\u000d\u000a\u000916#0 :\u000d\u000a\u0009\u0009ErrorMessage:='OK';\u000d\u000a\u000916#2001 :\u000d\u000a\u0009\u0009ErrorMessage:='RF Tag missing error';\u000d\u000a\u000916#2002 :\u000d\u000a\u0009\u0009ErrorMessage:='RF Tag communications error';\u000d\u000a\u000916#2003 :\u000d\u000a\u0009\u0009ErrorMessage:='UID mismatch error';\u000d\u000a\u000916#2004 :\u000d\u000a\u0009\u0009ErrorMessage:='RF Tag address error';\u000d\u000a\u000916#2005 :\u000d\u000a\u0009\u0009ErrorMessage:='RF Tag lock error';\u000d\u000a\u000916#2006 :\u000d\u000a\u0009\u0009ErrorMessage:='RF Tag verification error';\u000d\u000a\u000916#2007 :\u000d\u000a\u0009\u0009ErrorMessage:='RF Tag data lost error';\u000d\u000a\u000916#2008 :\u000d\u000a\u0009\u0009ErrorMessage:='RF Tag system error';\u000d\u000a\u000916#2009 :\u000d\u000a\u0009\u0009ErrorMessage:='RF Tag overwriting error';\u000d\u000a\u000916#200A :\u000d\u000a\u0009\u0009ErrorMessage:='Reader\/Writer connection error';\u000d\u000a\u000916#200B :\u000d\u000a\u0009\u0009ErrorMessage:='Communications connection error between Reader\/Writers';\u000d\u000a\u0009\u0009\u000d\u000a\u0009\u0009\u000d\u000aEND_CASE;","W":578.39999999999986,"X":1}],"CMT":"RESPONSE DATA","LRI":2,"RRI":3,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"myRFID.Response.Bits.BUSY"},{"__type":"ST","Ix":1,"Var":"Busy","X":1}],"LRI":2,"RRI":3,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"myRFID.Response.Bits.NORM"},{"__type":"LD","Dwn":true,"Id":"1f4a5ad9-2f06-4710-8871-e3a90000002f","Ix":1,"Not":true,"Var":"myRFID.Response.Bits.FRIC","X":1},{"__type":"LD","Id":"1f4a5ad9-2f06-4710-8871-e3a900000030","Ix":2,"Not":true,"Up":true,"Var":"myRFID.Response.Bits.FRIC","X":2},{"__type":"ST","Ix":3,"Var":"Done","X":3}],"CMT":"NORM=ON when Command completed successfully\u000aFRIC=Goes ON or OFF every other Continous Successful Tag reading","LRI":4,"RRI":5,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"myRFID.Response.Bits.ERR"},{"__type":"ST","Ix":1,"Var":"Error","X":1}],"LRI":2,"RRI":3,"VLs":[]}
